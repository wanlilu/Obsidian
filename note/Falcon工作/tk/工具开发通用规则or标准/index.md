
# FalconForTK 工具开发通用规则or标准

coenjin(金沛沛)

创建，最后修改于2023-10-24

该文档记录 Falcon 工具在 TK 项目实践过程中, 遇到的需要适配 TK 项目游戏制作流程的一些规则or标准, 在这篇文档中罗列成细则, 方便工具开发在日后开发过程中可以参考这个规则来进行工具开发, 减少与项目反复沟通的成本.

# PCG组件手工编辑

PCG生成内容, 包括地形/权重/植被/POI/等等, 都需要在生成结果基础上进行**手动调整编辑(编辑操作有且不限于: 点云: 移动/旋转/缩放/复制/删除/添加; 地形/权重: UE自带地形编辑的所有操作;** ), 这就要求PCG组件可以**固定/塌陷**当前生成结果, 之后就可以支持上述的手工编辑.

这样 PCG 组件就会有两种状态, 一种是 **固定/塌陷**, 即生成结果不随 Stack 合成结果变化, 一种是 **合成**, 即生成结果随 Stack 合成结果变化. 值得注意的是, 从 **固定/塌陷** 状态切换到 **合成** 状态**,** Stack合成会**刷新**当前生成结果(包括用户手动编辑的内容).

不同类型的组件在这方面会有不同的做法, 包括在 **固定/塌陷** 状态下如何进行手工编辑, 以及如何管理保存手工编辑结果.

## 地形Generator/地形Filter/VariantMask

*   组件本身不支持手工编辑, 只支持固定结果, 但是可以通过塌陷成手工层, 将当前组件生成内容转成手工编辑内容, 并在此基础上进行额外的手工编辑
    
*   手工编辑内容的保存, 依托于塌陷后的手工层关卡
    

## 植被RealtimeFoliage

*   组件本身不支持手工编辑, 只支持固定结果, 但是可以将生成结果塌陷到 HandcraftFoliage 组件中, 在此基础上进行额外的手工编辑
    
*   手工编辑内容的保存, 依托于塌陷到的 HandcraftFoliage 组件所在的层关卡
    

## RuleScatter

*   在固定结果之后, 用户可以将生成的 Actor 进行 **移动/旋转/缩放/复制/删除** 等操作, 包括 Prefab/POI 自身的一些编辑/导出功能, 也可以将 Actor 移动到其他关卡进行管理
    
*   手工编辑内容的保存, 依托于 RuleScatter 组件所在的层关卡, 如果用户将生成 Actor 移动到其他关卡, 则这部分移动的 Actor 将不受 RuleScatter 管理
    

## POI(CapturedPresetSpawner)

*   固定结果会同时固定地形/权重以及固定 POI 上的 Actors, 用户可以按照上述 地形Generator 的方式来进行POI地形/权重的手工编辑和保存, 对于固定的 Actors 可以进行 移动/旋转/缩放/复制/删除 等编辑操作 也可以将 Actor 移动到其他关卡进行管理
    
*   手工编辑内容的保存, 依托于 CapturedPresetSpawner 组件所在的层关卡, 如果用户将生成 Actor 移动到其他关卡, 则这部分移动的 Actor 将不受 CapturedPresetSpawner 管理
    

# PCG资产导出

包含 植被/POI/道路/Prefab/河流 等模块

## 通用规则

*   在PCG关卡中由PCG工具生成的资产, 都需要支持能够**导出到一个任意关卡**上, 原因是PCG生成的资产, 还不能直接导出到Release上, LA还需要在这个基础上做微调.
    
*   如果只是引用项目资产, 在导出资产过程中, 不要生成额外的资产(例如不要对PCG资产进行合并等操作)
    
*   如果是生成的 Mesh 资产(如道路/河流工具), 需要按照一定规则进行**切块**, 如果贴图也是生成的话, 需要按照切块Mesh为单位分别生成贴图.
    

## 植被

*   需要支持将植被工具生成的 Foliage Type 导出成 Static Mesh Actor, 并且:
    
    *   支持按 Foliage Type 转换(全局)
        
    *   支持按组件转换(组件面板上)
        
    *   支持勾选一个植被组件的程序层(RealtimeFoliage)、Static层（手工植被）、Prefab层、Eco层（植被小生态）
        

## POI

*   支持单独 POI 的导出, 也支持在 CapturePresetSpawner 上导出, 导出只导出 POI 关卡上的 StaticMeshActor
    

## 道路

*   道路 Mesh 支持按照道路一定长度(如100m)切块, 每次切块导出时, 都默认把上一次导出的内容删除
    

优而赞之，手有余香

成为第一个点赞的人

*   本文引用
*   本文被引用

2023-10-13 coenjin

*   ![](1704699466-48f34ae457aeafc603ab0a403f103594.svg)23
    
*   ![](1704699466-0b95f0082c86623bb3ccf41eddc04c8b.png)6
    
*   ![](1704699466-fd7976f7b401fb858c859dda738b7af1.png)0
    

![](1704699466-58e5fa504b5449b7a89a07130def4d77.png)添加标签

![](1704699466-325ac912a48e528af8ab64d72cca36b5.svg)

发表评论，抢沙发...

![](1704699466-d56c24c81b5e5f02b023f9382e1ca21d.svg)
